{"version":3,"sources":["assets\\framework\\network\\Message.ts"],"names":[],"mappings":";;;;;;AACA;IAKC,iBAAmB,GAAQ;QAC1B,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;QAChB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;IACnB,CAAC;IAEM,4BAAU,GAAjB,UAAkB,IAAyB;QAC1C,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;IAClC,CAAC;IAEM,2BAAS,GAAhB,UAAiB,IAAY;QAC5B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;IACnB,CAAC;IAEM,sBAAI,GAAX;QACC,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;QAC5B,IAAI,GAAG,GAAG,KAAK,CAAC,YAAY,EAAE,CAAC;QAC/B,IAAI,MAAM,GAAG,IAAI,UAAU,CAAC,GAAG,CAAC,CAAC;QACjC,OAAO,CAAC,GAAG,CAAC,gBAAgB,GAAG,MAAM,CAAC,CAAC;QACvC,OAAO,MAAM,CAAC,MAAM,CAAC;IACtB,CAAC;IAEO,0BAAQ,GAAhB;QACC,IAAI,KAAK,GAAG,IAAI,WAAW,CAAC,OAAO,EAAE,CAAC;QACtC,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAG,IAAI,CAAC,KAAK,IAAI,IAAI;YACpB,IAAI,GAAG,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACvC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;QACjC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;QACtC,IAAG,IAAI,CAAC,KAAK,IAAI,IAAI;YACpB,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;QACnC,IAAI,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QAC1C,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACnB,OAAO,KAAK,CAAC;IACd,CAAC;IACF,cAAC;AAAD,CAvCA,AAuCC,IAAA;AAvCY,0BAAO","file":"","sourceRoot":"/","sourcesContent":["\r\nexport class Message {\r\n\r\n\tprivate _cmd: any;\r\n\tprivate _data: any;\r\n\r\n\tpublic constructor(cmd: any) {\r\n\t\tthis._cmd = cmd;\r\n\t\tthis._data = null;\r\n\t}\r\n\r\n\tpublic addBuilder(data: flatbuffers.Builder) {\r\n\t\tthis._data = data.asUint8Array();\r\n\t}\r\n\r\n\tpublic addString(data: String) {\r\n\t\tthis._data = data;\r\n\t}\r\n\r\n\tpublic pack(): ArrayBuffer {\r\n\t\tlet build = this.toString();\r\n\t\tlet buf = build.asUint8Array();\r\n\t\tlet newBuf = new Uint8Array(buf);\r\n\t\tconsole.log(\"send message: \" + newBuf);\r\n\t\treturn newBuf.buffer;\r\n\t}\r\n\r\n\tprivate toString(): flatbuffers.Builder {\r\n\t\tlet build = new flatbuffers.Builder();\r\n\t\tlet data = null;\r\n\t\tif(this._data != null) \r\n\t\t\tdata = build.createString(this._data);\r\n\t\tgame.Package.startPackage(build);\r\n\t\tgame.Package.addCmd(build, this._cmd);\r\n\t\tif(this._data != null)\r\n\t\t\tgame.Package.addData(build, data);\r\n\t\tlet pack = game.Package.endPackage(build);\r\n\t\tbuild.finish(pack);\r\n\t\treturn build;\r\n\t}\r\n}"]}