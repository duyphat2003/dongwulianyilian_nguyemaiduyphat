{"version":3,"sources":["assets\\Game\\Scripts\\ui\\RankingList.ts"],"names":[],"mappings":";;;;;AAAA,gCAAmC;AACnC,uCAAkC;AAE5B,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAyC,+BAAY;IAArD;QAAA,qEA+CC;QA5CG,gBAAU,GAAkB,IAAI,CAAC;QAGjC,oBAAc,GAAc,IAAI,CAAC;QAEjC,YAAM,GAAW,4DAA4D,CAAC;;IAuClF,CAAC;IArCG,2BAAK,GAAL;QACI,IAAI,CAAC,WAAW,EAAE,CAAC;IACvB,CAAC;IAED,iCAAW,GAAX;QAAA,iBAeC;QAdG,IAAM,GAAG,GAAG,IAAI,cAAc,EAAE,CAAC;QACjC,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;QACnC,GAAG,CAAC,MAAM,GAAG;YACT,IAAI,GAAG,CAAC,MAAM,IAAI,GAAG,IAAI,GAAG,CAAC,MAAM,GAAG,GAAG,EAAE;gBACvC,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;gBACxC,2BAA2B;gBAC3B,IAAI,CAAC,IAAI,CAAC,UAAC,CAAC,EAAE,CAAC,IAAK,OAAA,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,EAAjB,CAAiB,CAAC,CAAC;gBACvC,KAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;aACjC;iBAAM;gBACH,OAAO,CAAC,KAAK,CAAC,aAAa,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC;aAC5C;QACL,CAAC,CAAC;QACF,GAAG,CAAC,OAAO,GAAG,cAAM,OAAA,OAAO,CAAC,KAAK,CAAC,mBAAmB,CAAC,EAAlC,CAAkC,CAAC;QACvD,GAAG,CAAC,IAAI,EAAE,CAAC;IACf,CAAC;IAED,wCAAkB,GAAlB,UAAmB,WAAkB;QAArC,iBAeC;QAdG,IAAM,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC;QACxC,OAAO,CAAC,iBAAiB,EAAE,CAAC;QAE5B,IAAI,eAAQ,CAAC,OAAO;YAEpB,WAAW,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,KAAK;gBAC5B,IAAM,IAAI,GAAG,EAAE,CAAC,WAAW,CAAC,KAAI,CAAC,cAAc,CAAC,CAAC;gBACjD,IAAM,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,kBAAQ,CAAC,CAAC;gBACjD,YAAY,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;gBACpD,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;YAC3B,CAAC,CAAC,CAAC;QAEH,IAAM,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC;QACnD,OAAO,CAAC,MAAM,GAAG,WAAW,CAAC,MAAM,GAAG,UAAU,CAAC;IACrD,CAAC;IA3CD;QADC,QAAQ,CAAC,EAAE,CAAC,UAAU,CAAC;mDACS;IAGjC;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;uDACa;IANhB,WAAW;QAD/B,OAAO;OACa,WAAW,CA+C/B;IAAD,kBAAC;CA/CD,AA+CC,CA/CwC,EAAE,CAAC,SAAS,GA+CpD;kBA/CoB,WAAW","file":"","sourceRoot":"/","sourcesContent":["import { UserInfo } from \"../Info\";\nimport RankItem from \"./RankItem\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class RankingList extends cc.Component {\n\n    @property(cc.ScrollView)\n    scrollView: cc.ScrollView = null;\n\n    @property(cc.Prefab)\n    rankItemPrefab: cc.Prefab = null;\n\n    apiUrl: string = \"https://5d820f171c8ff70014ef438d.mockapi.io/1/ranking-list\";\n\n    start() {\n        this.loadRanking();\n    }\n\n    loadRanking() {\n        const xhr = new XMLHttpRequest();\n        xhr.open(\"GET\", this.apiUrl, true);\n        xhr.onload = () => {\n            if (xhr.status >= 200 && xhr.status < 300) {\n                let data = JSON.parse(xhr.responseText);\n                // Sort descending by level\n                data.sort((a, b) => b.level - a.level);\n                this.populateScrollView(data);\n            } else {\n                console.error(\"XHR failed:\", xhr.status);\n            }\n        };\n        xhr.onerror = () => console.error(\"XHR request error\");\n        xhr.send();\n    }\n\n    populateScrollView(rankingData: any[]) {\n        const content = this.scrollView.content;\n        content.removeAllChildren();\n\n        if (UserInfo.getData)\n\n        rankingData.forEach((item, index) => {\n            const node = cc.instantiate(this.rankItemPrefab);\n            const rankItemComp = node.getComponent(RankItem);\n            rankItemComp.init(index + 1, item.level, item.name);\n            content.addChild(node);\n        });\n\n        const itemHeight = this.rankItemPrefab.data.height;\n        content.height = rankingData.length * itemHeight;\n    }\n}\n"]}