{"version":3,"sources":["assets\\Game\\Scripts\\ui\\DailyGetDialog.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { UserInfo, ChoiceType } from \"../Info\";\r\nimport View from \"../../../framework/plugin_boosts/ui/View\";\r\nimport { Toast } from \"../../../framework/plugin_boosts/ui/ToastManager\";\r\nimport Platform from \"../../../framework/Platform\";\r\nimport LanguageManager, { LanguageMode } from \"../LanguageManager\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class DailyGetDialog extends cc.Component {\r\n\r\n    onLoad () {}\r\n    start() {\r\n        switch (LanguageManager.instance.currentLanguage) {\r\n            case LanguageMode.CN:\r\n                this.set_label_lang(cc.js.formatStr(\"钻石 x \" + this.diamond),\r\n                    \"双倍领取\",\r\n                    \"=   每日奖励  =\",\r\n                    \"领取\",\r\n                );\r\n                break;\r\n            case LanguageMode.VI:\r\n                this.set_label_lang(cc.js.formatStr(\"Kim cương x \" + this.diamond),\r\n                    \"Nhân đôi số tiền\",\r\n                    \"= Phần thưởng hàng ngày =\",\r\n                    \"Nhận được\",\r\n                );\r\n\r\n                break;\r\n            case LanguageMode.EN:\r\n                this.set_label_lang(cc.js.formatStr(\"Diamond x \" + this.diamond),\r\n                    \"Double the amount\",\r\n                    \"= Daily Rewards =\",\r\n                    \"Receive\",\r\n                );\r\n                break;\r\n        }\r\n    }\r\n    diamond:number = 0;\r\n\r\n    @property(cc.Label)\r\n    rewardLabel: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    doubleButtonLabel: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    bannerLabel: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    receiveButtonLabel: cc.Label = null;\r\n\r\n    onShown()\r\n    {\r\n        this.diamond = g.randomInt(20,50);\r\n        this.rewardLabel.string = cc.js.formatStr(\"钻石 x \" + this.diamond)\r\n    }\r\n\r\n    click_get()\r\n    {\r\n        // share or video \r\n        UserInfo.addDiamond(this.diamond)\r\n        UserInfo.dailyGetTime = new Date().getTime()\r\n        UserInfo.save()\r\n        this.getComponent(View).hide()\r\n    }\r\n\r\n    share_succ()\r\n    {\r\n        UserInfo.addDiamond(this.diamond * 2);\r\n        UserInfo.dailyGetTime = new Date().getTime()\r\n        UserInfo.save()\r\n        this.getComponent(View).hide()\r\n    }\r\n\r\n    click_get_double()\r\n    {\r\n        //share orvideo\r\n        let choice = UserInfo.getChoice(ChoiceType.DailyGet);\r\n        if (choice == 0)\r\n        {\r\n            this.share_succ();\r\n        }else if(choice == 1){\r\n            Platform.share(this.share_succ,this)\r\n        }else{\r\n            //watch video\r\n            Platform.watch_video(this.share_succ,this)\r\n        }\r\n    }\r\n\r\n    set_label_lang(rewardString: string,\r\n        doubleButtonLabelString: string,\r\n        bannerString: string,\r\n        receiveButtonString: string,\r\n    ) {\r\n        this.rewardLabel.string = rewardString;\r\n        this.doubleButtonLabel.string = doubleButtonLabelString;\r\n        this.bannerLabel.string = bannerString;\r\n        this.receiveButtonLabel.string = receiveButtonString;\r\n    }\r\n}"]}