{"version":3,"sources":["assets\\framework\\plugin_boosts\\utils\\EventManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["/**\r\n* name \r\n*/\r\n\tclass EventManager {\r\n\r\n\t\tprivate _eventList: {[key:string]:Array<{listen:Function, target: any}>};\r\n\r\n\t\tpublic constructor() {\r\n\t\t\tthis._eventList = {};\r\n\t\t}\r\n\r\n\t\tpublic on(key:string, listen: Function, target?:any){\r\n\t\t\tif(this._eventList[key] != null){\r\n\t\t\t\tlet array = this._eventList[key];\r\n\t\t\t\tarray.push({listen: listen, target:target});\r\n\t\t\t}else{\r\n\t\t\t\tlet array = new Array<any>();\r\n\t\t\t\tarray.push({listen:listen, target:target});\r\n\t\t\t\tthis._eventList[key] = array;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic off(key: string, listener?:any, target?:any){\r\n\t\t\tif(listener != null && !(listener instanceof Function)){\r\n                target = listener;\r\n                listener = null;\r\n            }\r\n\t\t\tif(this._eventList[key] != null){\r\n\t\t\t\tif(listener == null && target == null){\r\n\t\t\t\t\tdelete this._eventList[key];\r\n\t\t\t\t}else{\r\n\t\t\t\t\tlet array = this._eventList[key];\r\n\t\t\t\t\tfor(let i = array.length - 1; i >= 0; i--){\r\n\t\t\t\t\t\tif(listener != null && target != null){\r\n\t\t\t\t\t\t\tif(array[i].listen == listener && array[i].target == target){\r\n\t\t\t\t\t\t\t\tarray.splice(i, 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else if(listener != null && array[i].listen == listener){\r\n\t\t\t\t\t\t\tarray.splice(i, 1);\r\n\t\t\t\t\t\t}else if(target != null && array[i].target == target){\r\n\t\t\t\t\t\t\tarray.splice(i, 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic emit(tag: string, ...params: any[]){\r\n\t\t\tlet sendOk:boolean = false;\r\n\t\t\tif(this._eventList[tag] != null){\r\n\t\t\t\tlet array = this._eventList[tag];\r\n\t\t\t\tconsole.log(\"emit message: \" ,tag, array.length);\r\n\t\t\t\tfor(let i = 0; i < array.length; i++){\r\n\t\t\t\t\tlet obj = array[i];\r\n\t\t\t\t\tif(obj.target != null){\r\n\t\t\t\t\t\tif(obj.listen.apply(obj.target, params))\r\n\t\t\t\t\t\t\tsendOk = true\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tif(obj.listen.apply(this, params))\r\n\t\t\t\t\t\t\tsendOk = true\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn sendOk \r\n\t\t}\r\n\r\n\t}\r\n\r\n\texport var event = new EventManager();"]}