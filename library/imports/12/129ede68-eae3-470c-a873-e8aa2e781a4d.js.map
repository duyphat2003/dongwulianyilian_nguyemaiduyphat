{"version":3,"sources":["assets\\framework\\plugin_boosts\\ui\\ToastManager.ts"],"names":[],"mappings":";;;;;;AAAA,mDAA8C;AAExC,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAE/B,QAAA,KAAK,GAAgB,IAAI,CAAC;AAGrC;IAA0C,gCAAY;IAAtD;;IAoDA,CAAC;IA/CG,4BAAK,GAAL;QACI,IAAI,CAAC,SAAS,GAAG,IAAI,EAAE,CAAC,QAAQ,EAAE,CAAC;QACnC,aAAK,GAAG,IAAI,CAAC;IACjB,CAAC;IAED,gCAAS,GAAT;QAEI,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;IAC3B,CAAC;IAED,2BAAI,GAAJ,UAAK,IAAI,EAAC,GAAS;QAAT,oBAAA,EAAA,SAAS;QAEf,aAAa;QACb,IAAI,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC;QAChC,IAAI,SAAS,GAAG,IAAI,CAAC;QACrB,IAAI,IAAI,IAAI,IAAI,EAChB;YACI,IAAI,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACnC,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,wBAAc,CAAC,CAAC;YAC9C,IAAG,SAAS,IAAI,IAAI,EACpB;gBACI,OAAO,CAAC,IAAI,CAAC,wDAAwD,CAAC,CAAA;aACzE;YACD,oCAAoC;YACpC,uCAAuC;SAC1C;aAAI;YACD,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,wBAAc,CAAC,CAAC;SACjD;QACD,IAAG,IAAI,CAAC,MAAM,IAAI,IAAI;YAClB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAC,KAAK,CAAC,CAAC;QAEnC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAC,IAAI,EAAC,GAAG,CAAC,CAAA;QAC7B,OAAO,SAAS,CAAC;IACrB,CAAC;IAEO,2BAAI,GAAZ,UAAa,SAAwB,EAAC,IAAI,EAAC,GAAG;QAA9C,iBASC;QAPG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;QACpB,IAAI,CAAC,YAAY,CAAC,UAAA,CAAC;YACf,SAAS,CAAC,IAAI,CAAC,UAAA,CAAC;gBACZ,KAAI,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,CAAA;gBAClC,OAAO,CAAC,GAAG,CAAC,4BAA4B,EAAC,KAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,CAAA;YACnE,CAAC,CAAC,CAAC;QACP,CAAC,EAAC,GAAG,CAAC,CAAA;IACV,CAAC;IA9CD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;gDACJ;IAHC,YAAY;QADhC,OAAO;OACa,YAAY,CAoDhC;IAAD,mBAAC;CApDD,AAoDC,CApDyC,EAAE,CAAC,SAAS,GAoDrD;kBApDoB,YAAY","file":"","sourceRoot":"/","sourcesContent":["import ToastComponent from \"./ToastComponent\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\nexport var Toast:ToastManager = null;\r\n\r\n@ccclass\r\nexport default class ToastManager extends cc.Component {\r\n    toastPool:cc.NodePool;\r\n    @property(cc.Prefab)\r\n    prefab:cc.Prefab\r\n    \r\n    start () {\r\n        this.toastPool = new cc.NodePool();\r\n        Toast = this;\r\n    }\r\n\r\n    onDestroy()\r\n    {\r\n        this.toastPool.clear();\r\n    }\r\n\r\n    make(text,dur = 1.3)\r\n    {\r\n        //show toast \r\n        let node = this.toastPool.get();\r\n        let toastComp = null;\r\n        if (node == null)\r\n        {\r\n            node = cc.instantiate(this.prefab);\r\n            toastComp = node.getComponent(ToastComponent);\r\n            if(toastComp == null)\r\n            {\r\n                console.warn(\"Toast.make : Toast Prefab must contains ToastComponent\")\r\n            }\r\n            // ToastManager.toastPool.put(node);\r\n            // node = ToastManager.toastPool.get();\r\n        }else{\r\n            toastComp = node.getComponent(ToastComponent);\r\n        }\r\n        if(node.parent == null)\r\n            this.node.addChild(node,99999);\r\n        \r\n        this.show(toastComp,text,dur)\r\n        return toastComp;\r\n    }\r\n\r\n    private show(toastComp:ToastComponent,text,dur)\r\n    {\r\n        toastComp.show(text)\r\n        this.scheduleOnce(_=>{\r\n            toastComp.hide(_=>{\r\n                this.toastPool.put(toastComp.node)\r\n                console.log(\"Toast.hide toastpool size:\",this.toastPool.size())\r\n            });\r\n        },dur)\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}