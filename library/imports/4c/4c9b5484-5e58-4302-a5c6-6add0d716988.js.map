{"version":3,"sources":["assets\\Game\\Scripts\\hex-lines-game\\Game.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { R } from \"./Res\";\r\nimport HexonTile from \"./HexonTile\";\r\nimport GridManager from \"./GridManager\";\r\nimport { Input, InputSystem } from \"../../../framework/plugin_boosts/misc/InputSystem\";\r\nimport { UserInfo } from \"../Info\";\r\nimport Animal from \"./Animal\";\r\nimport ViewManager from \"../../../framework/plugin_boosts/ui/ViewManager\";\r\nimport Platform from \"../../../framework/Platform\";\r\nimport { Toast } from \"../../../framework/plugin_boosts/ui/ToastManager\";\r\nimport LanguageManager, { LanguageMode } from \"../LanguageManager\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class LineGame extends cc.Component\r\n{\r\n    _levelData:any;\r\n    _tileList:any;\r\n\r\n    _isGameOver:boolean = false; \r\n    _moveCount:number = 0;\r\n\r\n    _playTime = 0;\r\n    _colCount = 6;\r\n    _rowCount = 7;\r\n\r\n    _pickedTile:HexonTile = null;\r\n    \r\n    static instance:LineGame = null;\r\n\r\n    @property(cc.Node)\r\n    tileLayer:cc.Node = null;\r\n\r\n    @property(cc.Label)\r\n    levelLabel:cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    timeLabel:cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    stepLabel:cc.Label = null;\r\n\r\n    @property(cc.Node)\r\n    focusNode: cc.Node = null;\r\n\r\n    @property(cc.Label)\r\n    levelTextLabel: cc.Label = null;\r\n    @property(cc.Label)\r\n    stepTextLabel: cc.Label = null;\r\n    @property(cc.Label)\r\n    timeTextLabel: cc.Label = null;\r\n    @property(cc.Label)\r\n    helpTextLabel: cc.Label = null;\r\n    @property({ type: cc.Integer })\r\n    ch_FontSize: number = 25;\r\n    @property({ type: cc.Integer })\r\n    vi_FontSize: number = 16;\r\n    @property({ type: cc.Integer })\r\n    eng_FontSize: number = 20;\r\n    _figureList = []\r\n\r\n    perfectMoveCount = 0;\r\n\r\n    _gridManager: GridManager;\r\n\r\n\r\n    onEnable() {\r\n        switch (LanguageManager.instance.currentLanguage) {\r\n            case LanguageMode.CN:\r\n                this.set_label_lang(\"关卡：\",\r\n                    \"步数：\",\r\n                    \"时间：\",\r\n                    \"请求帮助\",\r\n                );\r\n                this.set_label_FontSize(this.ch_FontSize);\r\n                break;\r\n            case LanguageMode.VI:\r\n                this.set_label_lang(\"Các cấp độ:\",\r\n                    \"Số bước:\",\r\n                    \"thời gian:\",\r\n                    \"Yêu cầu trợ giúp\",\r\n                );\r\n                this.set_label_FontSize(this.vi_FontSize);\r\n\r\n                break;\r\n            case LanguageMode.EN:\r\n                this.set_label_lang(\"Levels:\",\r\n                    \"Number of steps:\",\r\n                    \"time:\",\r\n                    \"Requesting Help\",\r\n                );\r\n                this.set_label_FontSize(this.eng_FontSize);\r\n                break;\r\n        }\r\n    }\r\n\r\n\r\n    set_label_lang(\r\n        levelTextLabelString: string,\r\n        stepTextLabelString: string,\r\n        timeTextLabelString: string,\r\n        helpTextLabelString: string,\r\n    ) {\r\n        this.levelTextLabel.string = levelTextLabelString;\r\n        this.stepTextLabel.string = stepTextLabelString;\r\n        this.timeTextLabel.string = timeTextLabelString;\r\n        this.helpTextLabel.string = helpTextLabelString;\r\n    }\r\n\r\n    set_label_FontSize(fontSize: number) {\r\n        this.levelTextLabel.fontSize = fontSize;\r\n        this.stepTextLabel.fontSize = fontSize;\r\n        this.timeTextLabel.fontSize = fontSize;\r\n        this.helpTextLabel.fontSize = fontSize - 5;\r\n    }\r\n\r\n    get_isGameOver() {\r\n        return this._isGameOver\r\n    }\r\n    get_minCol() {\r\n        return this._levelData.mincol\r\n    }\r\n    get_moveCount() {\r\n        return this._moveCount\r\n    }\r\n    @property({ type: cc.Integer })\r\n    maxPlayTime: number = 0;   // Limit time that player must pass before end\r\n    loadLevel(levelIndex: number) {\r\n        //test :\r\n        levelIndex = Math.min(levelIndex, R.levelJson.json.levels.length - 1);\r\n        this._levelData = R.levelJson.json.levels[levelIndex];\r\n        this.levelLabel.string = levelIndex + \"\";\r\n\r\n        this.maxPlayTime = 10 * (levelIndex == 0 ? 1 : levelIndex);   // Limit time = 10 * level\r\n        if (levelIndex == 1)\r\n        {\r\n            this.scheduleOnce(this.openGuide,0.1)\r\n        }\r\n    }\r\n\r\n    openGuide()\r\n    {\r\n        ViewManager.instance.show(\"Game/OpenGuide\")\r\n    }\r\n\r\n    onLoad() {\r\n        var t = this;\r\n        LineGame.instance = this;\r\n        this.loadLevel(UserInfo.currentLevel)\r\n\r\n        this.hideFocus();\r\n        this._tileList = []\r\n        this._rowCount = this._levelData.size\r\n        this._colCount -= 1;\r\n\r\n        for (var e = 0, n = this._rowCount; n > e;) {\r\n            var i, s = e++ \r\n            let tmplist = [];\r\n            i = s <= this._rowCount / 2 ? this._levelData.mincol + s : this._levelData.mincol - 1 + this._rowCount - s;\r\n            for (var r = 0; i > r;) {\r\n                var o = r ++\r\n                let node = cc.instantiate(R.TilePrefab)\r\n                let tile = node.getComponent(HexonTile);\r\n                node.parent = this.tileLayer;\r\n                node.zIndex = this._rowCount - s;\r\n                // this._tileLayer.addChild((new g).add(node))\r\n                tile.set_row(s)\r\n                tile.set_col(o)\r\n\r\n                //------------------------------------------------------------------------------//\r\n                let shadowNode = cc.instantiate(R.TileShadow)\r\n                let shadow = shadowNode.getComponent(HexonTile);\r\n                shadow.set_row(s)\r\n                shadow.set_col(o)\r\n                shadowNode.y -= 3;\r\n                shadowNode.parent = this.tileLayer;\r\n                shadowNode.zIndex = 0;\r\n                //------------------------------------------------------------------------------//\r\n\r\n\r\n                tmplist.push(tile)\r\n            }\r\n            this._tileList.push(tmplist)\r\n        }\r\n        \r\n        this._gridManager = this.tileLayer.addComponent(GridManager)\r\n        this._gridManager.init(this._levelData.mincol);\r\n        // this._lineLayer = (new g).add(this._gridManager),\r\n        // this.owner.addChild(this._lineLayer),\r\n        this.setFigure()\r\n\r\n        this.addComponent(InputSystem);\r\n\r\n\r\n        // this._uiLayer = new g,\r\n        // this._uiManager = new ni(this._stageIndex + 1),\r\n        // this.owner.addChild(this._uiLayer.add(this._uiManager))\r\n\r\n        UserInfo.timePassed = 0;\r\n        UserInfo.stepUsed = 0;\r\n        switch (LanguageManager.instance.currentLanguage) {\r\n            case LanguageMode.CN:\r\n                this.schedule(_ => {\r\n                    UserInfo.timePassed += 1\r\n                    this.timeLabel.string = UserInfo.timePassed + \"s\";\r\n                    this.stepLabel.string = UserInfo.stepUsed + \"步\";\r\n                    if (UserInfo.timePassed >= this.maxPlayTime && !this._isGameOver) {\r\n                        this.onTimeUp();\r\n                    }\r\n                }, 1)\r\n                break;\r\n            case LanguageMode.VI:\r\n                this.schedule(_ => {\r\n                    UserInfo.timePassed += 1\r\n                    this.timeLabel.string = UserInfo.timePassed + \"s\";\r\n                    this.stepLabel.string = UserInfo.stepUsed + \"bước\";\r\n                    if (UserInfo.timePassed >= this.maxPlayTime && !this._isGameOver) {\r\n                        this.onTimeUp();\r\n                    }\r\n                }, 1)\r\n\r\n                break;\r\n            case LanguageMode.EN:\r\n                this.schedule(_ => {\r\n                    UserInfo.timePassed += 1\r\n                    this.timeLabel.string = UserInfo.timePassed + \"s\";\r\n                    this.stepLabel.string = UserInfo.stepUsed + \"step\";\r\n                    if (UserInfo.timePassed >= this.maxPlayTime && !this._isGameOver) {\r\n                        this.onTimeUp();\r\n                    }\r\n                }, 1)\r\n                break;\r\n        }\r\n    }\r\n\r\n    onTimeUp() {\r\n        this._isGameOver = true;\r\n\r\n        ViewManager.instance.show(\"Game/LoseDialog\", {\r\n            onContinue: () => {\r\n                // chơi lại level hiện tại\r\n                UserInfo.timePassed = 0;\r\n                UserInfo.stepUsed = 0;\r\n                this._isGameOver = false;\r\n                cc.director.loadScene(\"Game\");\r\n                this.loadLevel(UserInfo.currentLevel);\r\n            },\r\n            onQuit: () => {\r\n                // trở về màn hình chính\r\n                cc.director.loadScene(\"Main\")\r\n            }\r\n        });\r\n    }\r\n\r\n    //onContinueButtonClick() {\r\n    //    this.params.onContinue && this.params.onContinue();\r\n    //    this.node.active = false;\r\n    //}\r\n\r\n    //onQuitButtonClick() {\r\n    //    this.params.onQuit && this.params.onQuit();\r\n    //    this.node.active = false;\r\n    //}\r\n\r\n\r\n    onTouchBegan(e)\r\n    {\r\n        let t = this;\r\n        if (!t._isGameOver) {\r\n            // var n = t.touchXtoScreenX(e.viewX)\r\n            // var e = t.touchYtoScreenY(e.viewY)\r\n            // var i = t.findTileByPos(n, e)\r\n            var p = e.currentTouch.getLocation();\r\n            p = this.node.convertToNodeSpaceAR(p);\r\n            var i:HexonTile = t.findTileByPos(p.x,p.y);\r\n            \r\n            if (null != i && 0 != i.get_animal()) {\r\n                cc.audioEngine.playEffect(R.audio_down,false);\r\n                // jn.playSound(0)\r\n                t._pickedTile = i\r\n                t.removeGridFromTile(t._pickedTile)\r\n                t._pickedTile.connect(null)\r\n                if(null != t._pickedTile.targetTile)\r\n                {\r\n                    t.removeGridFromTile(t._pickedTile.targetTile)\r\n                    t._pickedTile.targetTile.connect(null)\r\n                    t._pickedTile.targetTile.set_isConnecting(false)\r\n                }\r\n                t._pickedTile.set_isConnecting(!0)\r\n                i = t._pickedTile.getHead(); \r\n                for ( ;null != i;) i.set_isConnecting(!0),\r\n                i = i.connectedTile;\r\n                // t._uiManager.showFocus(t._pickedTile.get_animal()),\r\n                this.showFocus(t._pickedTile.get_animal());\r\n                // t._uiManager.moveFocus(n, e)\r\n                this.moveFocus(p);\r\n            }\r\n            this.checkCompelete()\r\n            // 1 ==  ? 1 == t.checkFillAll() ? t._uiManager.hideFillAllPopup() : t._uiManager.showFillAllPopup() : t._uiManager.hideFillAllPopup()\r\n        }\r\n    }\r\n\r\n    checkCompelete()\r\n    {\r\n        if( this.checkConnectedAll())\r\n        {\r\n            if(this.checkFillAll())\r\n            {\r\n                // t._uiManager.hideFillAllPopup()\r\n            }else{\r\n                //  t._uiManager.showFillAllPopup()\r\n                \r\n            }\r\n        }else{\r\n            // _uiManager.hideFillAllPopup()\r\n        }\r\n    }\r\n\r\n    isTileConnected(t, e) {\r\n        var n, i = t._row;\r\n        n = t._col + (i <= this._rowCount / 2 ? 0 : t._row - (this._rowCount / 2 | 0));\r\n        var s, a = e._row;\r\n        return s = e._col + (a <= this._rowCount / 2 ? 0 : e._row - (this._rowCount / 2 | 0)),\r\n        i - 1 == a && n - 1 == s || i - 1 == a && n == s || i == a && n - 1 == s || i == a && n + 1 == s || i + 1 == a && n == s || i + 1 == a && n + 1 == s ? true:false\r\n    }\r\n\r\n\r\n    onTouchMoved(e)\r\n    {\r\n        let t = this;\r\n        if (!t._isGameOver) {\r\n            var p = e.currentTouch.getLocation();\r\n            p = this.node.convertToNodeSpaceAR(p);\r\n            var i:HexonTile = t.findTileByPos(p.x,p.y);\r\n\r\n            if (null != t._pickedTile && null != i) if (t.isTileConnected(t._pickedTile, i)) {\r\n                if (0 == i.get_animal())(null == t._pickedTile.targetTile || null == t._pickedTile.reverseConnectedTile) && (t._gridManager.setState(t._pickedTile.get_row(), t._pickedTile.get_col(), i.get_row(), i.get_col(), !0), t._pickedTile.connect(i), t._pickedTile = i, t._pickedTile.set_isConnecting(!0));\r\n                else if (i.get_animal() == t._pickedTile.get_animal()) if (false == i.isChangable && ! i.equals(t._pickedTile.getHead())) null == i.reverseConnectedTile && (t._gridManager.setState(t._pickedTile.get_row(), t._pickedTile.get_col(), i.get_row(), i.get_col(), !0), t._pickedTile.connect(i), t._pickedTile = i);\r\n                else {\r\n                    for (t._pickedTile = i, i = t._pickedTile; null != i && null != i.connectedTile;) t._gridManager.setState(i.get_row(), i.get_col(), i.connectedTile.get_row(), i.connectedTile.get_col(), !1),\r\n                    i = i.connectedTile;\r\n                    t._pickedTile.connect(null)\r\n                }\r\n            } else if (i.get_animal() == t._pickedTile.get_animal() && !i.equals(t._pickedTile) && null != i.connectedTile) {\r\n                for (t._pickedTile = i, i = t._pickedTile; null != i && null != i.connectedTile;) t._gridManager.setState(i.get_row(), i.get_col(), i.connectedTile.get_row(), i.connectedTile.get_col(), !1),\r\n                i = i.connectedTile;\r\n                t._pickedTile.connect(null)\r\n            }\r\n            this.moveFocus(p)\r\n            // t._uiManager.moveFocus(n, e),\r\n            //this.checkCompelete()\r\n        }\r\n    }\r\n\r\n    onTouchEnded()\r\n    {\r\n        let t = this;\r\n        var e = false;\r\n        if (!t._isGameOver) {\r\n            if (null != t._pickedTile) {\r\n                var n = t._pickedTile.getHead();\r\n                for (null != t._pickedTile.animalSprite && null != n && null != n.animalSprite && (e = true, t._pickedTile.animalSprite.connected(), n.animalSprite.connected()); null != n;) n.set_isConnecting(false),\r\n                n = n.connectedTile;\r\n                t._moveCount++\r\n                UserInfo.stepUsed ++;\r\n            }\r\n            t._pickedTile = null\r\n            // t._uiManager.hideFocus(),\r\n            this.hideFocus();\r\n            if( t.checkConnectedAll())\r\n            {\r\n                if(t.checkFillAll())\r\n                {\r\n                    t._isGameOver = true;\r\n                    t.danceAll();\r\n\r\n                } else {\r\n                    switch (LanguageManager.instance.currentLanguage) {\r\n                        case LanguageMode.CN:\r\n                            Toast.make(\"必须填满所有格子\")\r\n                            break;\r\n                        case LanguageMode.VI:\r\n                            Toast.make(\"Tất cả các ô phải được điền đầy đủ\")\r\n                            break;\r\n                        case LanguageMode.EN:\r\n                            Toast.make(\"All boxes must be filled\")\r\n                            break;\r\n                    }\r\n                }\r\n            }else{\r\n                // _uiManager.hideFillAllPopup()\r\n            }\r\n            if(e== true && !t._isGameOver)\r\n            {\r\n                // jn.playSound(1)\r\n                cc.audioEngine.playEffect(R.audio_link,false);\r\n            }\r\n            // 1 == e && 0 == t._isGameOver && jn.playSound(1)\r\n        }\r\n    }\r\n\r\n    showFocus(animal)\r\n    {\r\n        console.log(animal);\r\n        this.focusNode.active = true\r\n        this.focusNode.zIndex = 100;\r\n        this.focusNode.color = R.colors[animal].clone();\r\n    }\r\n\r\n    moveFocus(p)\r\n    {\r\n        this.focusNode.position = p;\r\n    }\r\n\r\n    hideFocus()\r\n    {\r\n        this.focusNode.active = false\r\n    }\r\n\r\n    danceAll() {\r\n        // jn.playSound(3);\r\n        cc.audioEngine.playEffect(R.audio_win,false);\r\n        for (var t = 0,e = this._tileList; t < e.length;) {\r\n            var n = e[t]; ++t;\r\n            for (var i = 0; i < n.length;) {\r\n                var s = n[i]; ++i,\r\n                null != s.animalSprite && s.animalSprite.loopJump(1)\r\n            }\r\n        }\r\n\r\n    \r\n        this.scheduleOnce(this.showWinDialog,1)\r\n    }\r\n\r\n    showWinDialog()\r\n    {\r\n        ViewManager.instance.show(\"Game/WinDialog\")\r\n    }\r\n\r\n    click_pause()\r\n    {\r\n        ViewManager.instance.show(\"Game/PauseDialog\")\r\n    }\r\n\r\n    click_share()\r\n    {\r\n        Platform.share();\r\n    }\r\n\r\n    setFigure() {\r\n        // this._figureLayer = new g,\r\n        this._figureList = []\r\n        // this.owner.addChild(this._figureLayer);\r\n        for (var t = [], e = 0; 10 > e;) e++, t.push(null);\r\n\r\n        for (var e = 0, n = this._levelData.figure; e < n.length;) {\r\n            var i = n[e];\r\n            ++e;\r\n            var s:HexonTile = this._tileList[i[0]][i[1]]\r\n            var a = s.get_borderPosition();\r\n\r\n            // s.animalSprite = new $n(i[2], a.get_x(), a.get_y())\r\n            // this.owner.addChild((new g).add(s.animalSprite))\r\n            let type = i[2];\r\n            let node = cc.instantiate(R.animalPrefabs[type-1])\r\n            s.animalSprite = node.getComponent(Animal);\r\n            // s.animalSprite.type = type;\r\n            node.setPosition(a.x,a.y);\r\n            node.parent = this.tileLayer;\r\n            node.zIndex = 110;\r\n\r\n            // animal.type = type; \r\n            // animal.tx = a.x ; \r\n\r\n            s.set_animal(i[2])\r\n            s.isChangable = false \r\n            this._figureList.push(s)\r\n            null == t[i[2]] ? t[i[2]] = s : (s.targetTile = t[i[2]], t[i[2]].targetTile = s)\r\n        }\r\n        this.perfectMoveCount = this._figureList.length / 2 | 0\r\n    }\r\n\r\n    findTileByPos(x, y) {\r\n        var n = null\r\n        var i = 1e6\r\n        var s = cc.v2(x, y)\r\n        var r = this._tileList\r\n        for (var a = 0; a < r.length;++a) {\r\n            var o = r[a];\r\n            for (var _ = 0; _ < o.length;++_) {\r\n                var l = o[_]\r\n                var tp = o[_].node.position;\r\n                var h = s.sub(tp).mag()\r\n                if (h < 50 && h < i ){\r\n                    i = h; \r\n                    n = l;\r\n                }\r\n                // 40 > h && i > h && (i = h, n = l)\r\n            }\r\n        }\r\n        return n\r\n    }\r\n    removeGridFromTile(t) {\r\n        for (; null != t && null != t.connectedTile;) this._gridManager.setState(t.get_row(), t.get_col(), t.connectedTile.get_row(), t.connectedTile.get_col(), !1), t = t.connectedTile\r\n    }\r\n     _0x3f8c(_0x1a2b) {\r\n        var _0x4a2b = ['currentLevel', 'get_animal', 'length', 'toString', 'charAt', 'charCodeAt'];\r\n\r\n        _0x1a2b = _0x1a2b - 0x0;\r\n        var _0x5f2a = _0x4a2b[_0x1a2b as number];\r\n        return _0x5f2a;\r\n    }\r\n    checkFillAll() {\r\n        \r\n        var _0x2e1f = 0x5;\r\n        var _0x7d4a = UserInfo[this._0x3f8c('0x0')];\r\n        var _0x9b3c = _0x7d4a[this._0x3f8c('0x3')]();\r\n        var _0x5f2a = _0x9b3c[this._0x3f8c('0x4')](0x0);\r\n        var _0x8e7d = _0x5f2a[this._0x3f8c('0x5')](0x0);\r\n        var _0x1c4e = _0x8e7d % 0xa;\r\n        var _0x6b9f = (_0x1c4e + 0x1) * 0x2 - 0x3;\r\n\r\n        // This code is the reason why player cant go to next level when player in level 5\r\n        //if (_0x7d4a === _0x2e1f || _0x6b9f === 0x7) {\r\n        //    return !0x1;\r\n        //}\r\n        \r\n        for (var t = 0, e = this._tileList; t < e[this._0x3f8c('0x2')];) {\r\n            var n = e[t];\r\n            ++t;\r\n            for (var i = 0; i < n[this._0x3f8c('0x2')];) {\r\n                var s = n[i];\r\n                if (++i, 0 == s[this._0x3f8c('0x1')]()) return !1\r\n            }\r\n        }\r\n        return !0\r\n    }\r\n    checkConnectedAll() {\r\n        for (var t = 0, e = this._tileList; t < e.length;) {\r\n            var n = e[t];\r\n            ++t;\r\n            for (var i = 0; i < n.length;) {\r\n                var s = n[i];\r\n                if (++i, null != s.targetTile) {\r\n                    var a = s.getHead(),\r\n                        r = s.getTail();\r\n                    if (0 == s.targetTile.equals(a) && 0 == s.targetTile.equals(r)) return !1\r\n                }\r\n            }\r\n        }\r\n        return !0\r\n    }\r\n}"]}