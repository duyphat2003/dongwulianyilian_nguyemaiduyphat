{"version":3,"sources":["assets\\Game\\Scripts\\LanguageManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["﻿const { ccclass, property } = cc._decorator;\n\nexport enum LanguageMode {\n    EN = \"en\",\n    VI = \"vi\",\n    CN = \"zh\"\n}\n\n@ccclass\nexport default class LanguageManager {\n\n    private static _instance: LanguageManager = null;\n    private _currentLanguage: LanguageMode = LanguageMode.CN;\n\n    public get currentLanguage(): LanguageMode {\n        return this._currentLanguage;\n    }\n\n    public static get instance(): LanguageManager {\n        if (!this._instance) {\n            this._instance = new LanguageManager();\n        }\n        return this._instance;\n    }\n    public isLanguageFileExist = (): boolean => {\n        if (cc.sys.isNative) {\n            // Native: dùng jsb.fileUtils\n            const path = jsb.fileUtils.getWritablePath() + \"language.json\";\n            return jsb.fileUtils.isFileExist(path);\n        } else {\n            // Web/HTML5: kiểm tra localStorage\n            return cc.sys.localStorage.getItem(\"language.json\") != null;\n        }\n    }\n\n\n    //Save JSON\n    public saveLanguage(lang: LanguageMode) {\n        this._currentLanguage = lang;\n        const data = { currentLanguage: lang };\n\n        if (cc.sys.isNative) {\n            // Android/iOS/PC\n            const path = jsb.fileUtils.getWritablePath() + \"language.json\";\n            jsb.fileUtils.writeStringToFile(JSON.stringify(data), path);\n            cc.log(\"Saved language.json to:\", path);\n        } else {\n            // Web/Mobile HTML5\n            cc.sys.localStorage.setItem(\"language.json\", JSON.stringify(data));\n        }\n    }\n\n    //Load JSON\n    public loadLanguage() {\n        if (cc.sys.isNative) {\n            const path = jsb.fileUtils.getWritablePath() + \"language.json\";\n            if (jsb.fileUtils.isFileExist(path)) {\n                const content = jsb.fileUtils.getStringFromFile(path);\n                const data = JSON.parse(content);\n                this._currentLanguage = data.currentLanguage as LanguageMode;\n            }\n        } else {\n            const saved = cc.sys.localStorage.getItem(\"language.json\");\n            if (saved) {\n                const data = JSON.parse(saved);\n                this._currentLanguage = data.currentLanguage as LanguageMode;\n            }\n        }\n        cc.log(\"Loaded language:\", this._currentLanguage);\n    }\n}\n"]}