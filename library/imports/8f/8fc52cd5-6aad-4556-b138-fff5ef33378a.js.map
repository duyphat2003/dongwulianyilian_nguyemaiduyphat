{"version":3,"sources":["assets\\framework\\Platform.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { wxsdk } from \"./wxsdk/sdk\";\nimport { Toast } from \"./plugin_boosts/ui/ToastManager\";\nimport BKTool from \"./qqsdk/BKTool\";\nimport Device from \"./plugin_boosts/gamesys/Device\";\nimport SpriteFrameCache from \"./plugin_boosts/misc/SpriteFrameCache\";\nimport Signal from \"./plugin_boosts/misc/Signal\";\nimport { event } from \"./plugin_boosts/utils/EventManager\";\n\nenum WxCommands\n{\n    Hide = 99,\n    Next,\n    RankSmall,\n    Rank,\n}\n\nexport default class Platform\n{\n    static bannnerRefreshEnabled = true;\n    static onEnterForegroundSignal = new Signal();\n\n    static isAndroid = false\n    static isIOS = false;\n\n    static getOpenID()\n    {\n        if(cc.sys.WECHAT_GAME == cc.sys.platform)\n        {\n            // wechat \n            let userInfo = wxsdk.userInfo\n            if(userInfo && userInfo.openID )\n            {\n                return userInfo.openID\n            }else{\n                return \"\"\n            }\n        }else if (cc.sys.QQ_PLAY == cc.sys.platform)\n        {\n            return GameStatusInfo.openId;\n        }else{\n            return \"123\"\n        }\n    }\n\n    static getNick()\n    {\n        if (cc.sys.QQ_PLAY == cc.sys.platform)\n        {\n            return BKTool.getNick();\n        }else if (cc.sys.WECHAT_GAME == cc.sys.platform)\n        {\n            return  (wxsdk.userInfo && wxsdk.userInfo.nickName)  || \"自已\"\n        }else{\n            return \"玩家自已\"\n        }\n    }\n\n    static getHead()\n    {\n        if (cc.sys.QQ_PLAY == cc.sys.platform)\n        {\n            return BKTool.getHead();\n        }else if (cc.sys.WECHAT_GAME == cc.sys.platform)\n        {\n            // avatarUrl:\"https://wx.qlogo.cn/mmopen/vi_32/QlHaicGZOD7do9LuX5W4APHYSrUBqVaGULuwISLUf35IyOOYZ3IXl7nF5mW36JiaQ9snziawrAvkknX41SmeYa9AQ/132\"city:\"\"country:\"\"gender:1language:\"zh_CN\"nickName:\"Damon Ren⁶⁶⁶\"province:\"\"\n            let userInfo = wxsdk.userInfo\n            if(userInfo && userInfo.avatarUrl )\n            {\n                return userInfo.avatarUrl\n            }else{\n                return \"https://tank.wdfunny.com/speed_logo/2.jpg\"\n            }\n        }\n        return \"https://tank.wdfunny.com/speed_logo/1.jpg\"\n    }\n\n    private static loadHeadQQ(sp)\n    {\n        let self = this;\n        let absolutePath = \"GameSandBox://_head/\" + GameStatusInfo.openId + \".jpg\";\n        let isExit = BK.FileUtil.isFileExist(absolutePath);\n        cc.log(absolutePath + \" is exit :\" + isExit);\n        //如果指定目录中存在此图像就直接显示否则从网络获取\n        if (isExit) {\n            cc.loader.load(absolutePath, function (err, texture) {\n                if (err == null) {\n                    sp.spriteFrame = new cc.SpriteFrame(texture);\n                }\n            });\n        } else {\n            BK.MQQ.Account.getHeadEx(GameStatusInfo.openId, function (oId, imgPath) {\n                cc.log(\"openId:\" + oId + \" imgPath:\" + imgPath);\n                var image = new Image();\n                image.onload = function () {\n                    var tex = new cc.Texture2D();\n                    tex.initWithElement(image);\n                    tex.handleLoadedTexture();\n                    sp.spriteFrame = new cc.SpriteFrame(tex);\n                }\n                image.src = imgPath;\n            });\n        }\n    }\n\n    static loadSelfHead(sprite)\n    {\n        if (cc.sys.QQ_PLAY == cc.sys.platform)\n        {\n            this.loadHeadQQ(sprite);\n        }else{\n            SpriteFrameCache.instance.getSpriteFrame(Platform.getHead()).then(sf=>sprite.spriteFrame = sf)\n        }\n    }\n\n    static exit()\n    {\n        if(cc.sys.WECHAT_GAME == cc.sys.platform)\n        {\n            wx.offShow(Platform.onEnterForeground)\n            wx.offHide(Platform.onEnterBackground)\n        }else if (cc.sys.QQ_PLAY == cc.sys.platform)\n        {\n            \n        }\n    }\n\n    static configGetSignal:Signal = new Signal();\n\n    static login()\n    {\n        this.isAndroid = cc.sys.os == \"Android\"\n        console.log(\"================= os\" , cc.sys.os);\n        this.isIOS = cc.sys.os == \"iOS\"\n        if(cc.sys.WECHAT_GAME == cc.sys.platform)\n        {\n            wxsdk.login()\n            wxsdk.requestConfig(data=>{\n                this.configGetSignal.fire(data)\n            })\n            // get conf \n            wx.onShow(Platform.onEnterForeground)\n            wx.onHide(Platform.onEnterBackground)\n        }else if (cc.sys.QQ_PLAY == cc.sys.platform)\n        {\n            BKTool.login();\n            BK.onEnterForeground(Platform.onEnterForeground);\n            BK.onEnterBackground(Platform.onEnterBackground);\n        }\n    }\n\n    static requestServerConfigs(name,callback,target)\n    {\n        if(cc.sys.WECHAT_GAME == cc.sys.platform)\n        {\n            wxsdk.requestDB(name,callback,target)\n        }\n    }\n\n    static getGameID()\n    {\n        if (cc.sys.QQ_PLAY == cc.sys.platform)\n        {\n            GameStatusInfo.gameId;\n        }\n        return \"speed_wanyiwan\";\n    }\n\n\n    static getLaunchOptions()\n    {\n        if(cc.sys.WECHAT_GAME == cc.sys.platform)\n        {\n            return wx.getLaunchOptionsSync()\n        }\n        return {}\n    }\n\n    \n\n\n    static getCity()\n    {\n        return \"\"\n    }\n\n    static share(callback?,target?)\n    {\n        console.log(\"######开始分享\")\n        if(cc.sys.WECHAT_GAME == cc.sys.platform)\n        {\n            wxsdk.openShare();\n            let t = new Date().getTime()\n            Platform.onEnterForegroundSignal.on(()=>{\n                Platform.onEnterForegroundSignal.clear();\n                let d = new Date().getTime() - t;\n                if(d > 2333)\n                {\n                    setTimeout(_=>{\n                        if(callback)\n                            callback.call(target)\n                    },500)\n                }else{\n                    //用户及时返回分享失败 \n                    Toast.make(\"分享失败,请尝试换其它群分享\")\n                }\n            })\n        }else if(cc.sys.QQ_PLAY == cc.sys.platform)\n        {\n            BKTool.share(v=>{\n                if(v==\"success\")\n                {\n                    callback &&  callback.call(target)\n                }else{\n                    // Toast.make(\"分享失败\")\n                }\n            })\n        }else{\n            callback &&  callback.call(target)\n        }\n    }\n\n    static watch_video(callback,target?)\n    {\n        console.log(\"######开始看视频\")\n        if(cc.sys.WECHAT_GAME == cc.sys.platform)\n        {\n            wxsdk.loadVideoAd((code,isEnded)=>{\n                if(code == \"load\")\n                {\n                    cc.audioEngine.pauseMusic();\n                    Platform.bannnerRefreshEnabled = false;\n                }\n                else if(code == \"close\")\n                {\n                    Platform.bannnerRefreshEnabled = true;\n                    if(!isEnded)\n                        Toast.make(\"必须看完视频,才能获取奖励\")\n                    else\n                        callback && callback.call(target)\n                }\n            })\n        }else if(cc.sys.QQ_PLAY == cc.sys.platform)\n        {\n            //关闭背景\n            cc.audioEngine.pauseMusic();\n            let isFinish = false;\n            BKTool.loadVideoAd((v,video)=>{\n                if(v == \"load\")\n                {\n                    video.show()\n                }else if (v == \"finish\")\n                {\n                    isFinish = true;\n                    \n                }else if (v==\"close\")\n                {\n                    if(!isFinish)\n                        Toast.make(\"必须看完视频,才能获取奖励\")\n                    else\n                        callback && callback.call(target)\n                }\n            });\n        }else{\n            callback &&  callback.call(target)\n        }\n    }\n\n    static showBannerAd()\n    {\n        console.log(\"######显示Banner广告\")\n        if(cc.sys.WECHAT_GAME == cc.sys.platform)\n        {\n            wxsdk.showBannerAd();\n        }else if(cc.sys.QQ_PLAY == cc.sys.platform)\n        {\n            BKTool.showBannerAd();\n        }else{\n\n        }\n    }\n\n    static initBannerAd(b = 1)\n    {\n        if(b == 0) return;\n        if(cc.sys.QQ_PLAY == cc.sys.platform)\n        {\n            setInterval(_=>{\n                console.log(\"######加载Banner广告\")\n                BKTool.hideBannerAd()\n                BKTool.loadBannerAd(v=>{\n                    v == \"load\" && BKTool.showBannerAd();\n                })\n            } , 30000 )\n        }else if (cc.sys.WECHAT_GAME == cc.sys.platform)\n        {\n            setInterval(_=>{\n                if(Platform.bannnerRefreshEnabled)\n                {\n                    console.log(\"######加载Banner广告\")\n                    wxsdk.hideBannerAd()\n                    wxsdk.loadBannerAd(v=>{\n                        v == \"load\" && wxsdk.showBannerAd();\n                    })\n                }\n            } , 40000 )\n        }\n    }\n\n    static jumpTo()\n    {\n        // var desGameId = 1234; //跳转的gameid，必须为数字\n        // var extendInfo = \"\"; //额外参数，必须为字符串\n        // BK.QQ.skipGame(desGameId, extendInfo);\n    }\n\n    static showRankDialog()\n    {\n        console.log(\"[Platform]#showRankDialog\");\n        Toast.make(\"#[Platform]#showRankDialog\")\n        \n        // ViewManager.instance.show(\"Game/RankDialog\")\n    }\n\n    // Andriod 发送游戏快捷方式到桌面\n\n    static onEnterForeground()\n    {\n        console.log(\"=====================onEnterForeground=====================\")\n        if(cc.sys.platform == cc.sys.QQ_PLAY)\n        {\n            //onEnterForeground\n            // Device.resumeMusic()\n            cc.audioEngine.resumeMusic()\n        }else{\n            cc.audioEngine.resumeMusic()\n        }\n        Platform.onEnterForegroundSignal.fire();\n        event.emit(\"onEnterForeground\")\n    }\n\n    static onEnterBackground()\n    {\n        // BK.onEnterBackground(enterBackgroundListener);\n        event.emit(\"onEnterBackground\")\n    }\n\n    static  onGameExit()\n    {\n        // BK.onGameClose(gameCloseListener);\n    }\n\n    static showSmallRank()\n    {\n        wxsdk.postMessage(WxCommands.RankSmall);\n    }\n\n    static showRank()\n    {\n        wxsdk.postMessage(WxCommands.Rank);\n    }\n\n    static hideRank()\n    {\n        wxsdk.postMessage(WxCommands.RankSmall)\n    }\n\n    static getRankList(callback,target?)\n    {\n        console.log(\"[Platform]#获取排行榜数据\");\n        if(cc.sys.platform == cc.sys.QQ_PLAY)\n        {\n            return BKTool.getRankList((errorCode,list)=>{\n                callback && callback.call(target,errorCode,list);\n            })\n        }else if(cc.sys.platform == cc.sys.WECHAT_GAME)\n        {\n            \n        }\n    }\n\n    static uploadScore(score)\n    {\n        console.log(\"[Platform]#上传分数\");\n        if(!score) { console.log(\"score 上传失败：null\"); return}\n        if(cc.sys.platform == cc.sys.QQ_PLAY)\n        {\n            BKTool.uploadScore(score);\n        }else if (cc.sys.WECHAT_GAME == cc.sys.platform) {\n            // wxsdk.postMessage(WxCommands., score);\n            wxsdk.uploadScore(score)\n        }else{\n            // Toast.make(\"#[Platform]#uploadScore\")\n        }\n    }\n\n}"]}